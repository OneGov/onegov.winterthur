<div metal:use-macro="layout.base" i18n:domain="onegov.winterthur">
    <tal:b metal:fill-slot="title">
        ${title}
    </tal:b>
    <tal:b metal:fill-slot="content">
        <div class="daycare-calculator-result ${eligible and 'eligible' or 'not-eligible'}" tal:condition="calculation">

            <h2 i18n:translate>Summary</h2>
            <div class="summary">
                <dl class="summary-amounts">
                    <div class="info">
                        <dt i18n:translate>Your monthly costs</dt>
                        <dd>${calculation.parent_share_per_month} CHF</dd>
                    </div>

                    <div class="${calculation.city_share_per_month != '0.00' and 'success' or 'warning'}">
                        <dt i18n:translate>Our monthly contribution</dt>
                        <dd>${calculation.city_share_per_month} CHF</dd>
                    </div>

                    <div class="plain">
                        <dt i18n:translate>Daycare cost</dt>
                        <dd>${calculation.total_per_month} CHF</dd>
                    </div>
                </dl>

                <div class="panel warning" tal:condition="not eligible" i18n:translate>
                    Since your taxable income and wealth is above 75'000.00 CHF, you are not eligible for
                    any contributions by the city. You need to pay the full rate of your daycare.
                </div>

                <h3 i18n:translate>Your costs per week</h3>
                <table class="summary-agenda">
                    <thead class="show-for-sr">
                        <tr>
                            <th i18n:translate>Day</th>
                            <th i18n:translate>Service</th>
                            <th i18n:translate>Cost</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="(label, service, cost) calculation.agenda">
                            <td>${label}</td>
                            <td>${service}</td>
                            <td>${cost} CHF</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div tal:condition="eligible" tal:repeat="block calculation.blocks" class="block block-${block.id}">
                <h2>${block.title}</h2>

                <table>
                    <thead class="show-for-sr">
                        <tr>
                            <td i18n:translate class="hide-for-small-only">Note</td>
                            <td i18n:translate>Title</td>
                            <td i18n:translate>Operation</td>
                            <td i18n:translate>Amount</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr tal:repeat="result block.results" class="${result.important and 'important-result'}">
                            <td class="hide-for-small-only">${result.note}</td>
                            <td>${result.title}</td>
                            <td>${result.operation}</td>
                            <td>${result.readable_amount} ${result.currency}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="daycare-calculator">
            <div metal:use-macro="layout.macros['form']" />
        </div>
    </tal:b>
</div>